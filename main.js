!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){var n=t.data,r=t.modalCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._src=n.src,this._modalCard=r}var n,r;return n=e,(r=[{key:"_getTemplateCard",value:function(){return document.querySelector("#elements-template").content.querySelector(".element").cloneNode(!0)}},{key:"_generateCard",value:function(){return this.element=this._getTemplateCard(),this.cardImage=this.element.querySelector(".element__image"),this.cardTitle=this.element.querySelector(".element__footer-text"),this._setEventListeners(),this.cardTitle.textContent=this._name,this.cardImage.src=this._src,this.element}},{key:"_handleCardClick",value:function(e){var t=e.name,n=e.src;this.modalCard.open({name:t,src:n})}},{key:"_setEventListeners",value:function(){var e=this;this.element.querySelector(".icon-like").addEventListener("click",(function(){e._handleLikeBtn()})),this.element.querySelector(".icon-remove").addEventListener("click",(function(){e._handleDeleteBtn()})),this.element.querySelector(".element__image").addEventListener("click",(function(){e._handleCardClick({name:e._name,src:e._src})}))}},{key:"_handleLikeBtn",value:function(){this.element.querySelector(".icon-like").classList.toggle("icon-like_active")}},{key:"_handleDeleteBtn",value:function(){this.element.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(),r=document.querySelector(".profile__edit"),o=document.querySelector(".profile__name"),i=document.querySelector(".profile__ocupation"),u=document.querySelector(".profile__add-button");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);this._toggleButtonState(t,n),t.forEach((function(r){r.addEventListener("input",(function(){e._isValid(e._formElement,r),e._toggleButtonState(t,n)}))}))}},{key:"_isValid",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}},{key:"_showInputError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),r.textContent=n,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),n.classList.remove(this._errorClass),n.textContent=""}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this._disabledButton(t):this._enableButton(t)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_disabledButton",value:function(e){e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)}},{key:"_enableButton",value:function(e){e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled",!1)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var f=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"appendItem",value:function(e){this._container.append(e)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup__opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closeOnClick",value:function(e){return e.target.classList.contains("popup__opened")||e.target.classList.contains("modal__popup-img-close")}},{key:"_handleCloseButton",value:function(e){(e.target.classList.contains("popup__profile-close-icon")||e.target.classList.contains("popup__close-icon"))&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){e._closeOnClick(t)&&e.close()})),this._popupElement.addEventListener("click",(function(t){e._handleCloseButton(t)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._inputList=n._popupElement.querySelectorAll(".popup__text"),n._formElement=n._popupElement.querySelector(".popup"),n._buttonSubmit=n._popupElement.querySelector(".popup__button"),n._handleFormSubmit=t,n}return t=u,(n=[{key:"close",value:function(){_(S(u.prototype),"close",this).call(this),this._popupElement.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setEventListeners",value:function(){var e=this;_(S(u.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(v);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._title=t._popupElement.querySelector(".modal__popup-img-title"),t._image=t._popupElement.querySelector(".modal__popup-img-background"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.name,n=e.src;k(C(u.prototype),"open",this).call(this),this._title.textContent=t,this._image.src=n,this._image.setAttribute("alt",t)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(v);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var B=function(){function e(t){var n=t.userName,r=t.userJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userJob=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._userName.textContent,userJob:this._userJob.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.userjob;this._userName.textContent=t,this._userJob.textContent=n}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=new O(".modal__popup-img");q.setEventListeners();var I=function(e){return new n({data:e,modalCard:q})._generateCard()},T=new f({items:[{name:"Valle de Yosemite",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",src:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(e){var t=I(e);T.appendItem(t)}},".elements");T.renderer();var R=new g("#popup-place",(function(e){var t=I({name:e.title,src:e.src});T.prependItem(t),R.close()}));R.setEventListeners(),u.addEventListener("click",(function(){R.open()}));var x=new B({userName:o,userJob:i});x.setUserInfo({username:"Maricarmen",userjob:"Developer"});var V=new g("#popup-profile",(function(e){x.setUserInfo({username:e.name,userjob:e.about}),V.close()}));V.setEventListeners(),r.addEventListener("click",(function(){V.open()}));var A={inputSelector:".popup__text",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__text_type_error",errorClass:"popup__input-error_active"};Array.from(document.querySelectorAll(".popup")).forEach((function(e){new l(A,e).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQy9CRCxFQUFhRyxXQUFXRCxFQUM1QixHQUNELGFBQ0hGLEVBQWFuRCxXQUViLElBU011RCxFQUFpQixJQUFJcEMsRUFBYyxnQkFUdEIsU0FBQ2hHLEdBQ2hCLElBQU1rSSxFQUFjSixFQUFXLENBQzNCekgsS0FBTUwsRUFBS3FJLE1BQ1g5SCxJQUFLUCxFQUFLTyxNQUVkeUgsRUFBYU0sWUFBWUosR0FDekJFLEVBQWV6QyxPQUNuQixJQUdBeUMsRUFBZVAsb0JBRWYzRixFQUFVVixpQkFBaUIsU0FBUyxXQUNoQzRHLEVBQWU5RyxNQUNuQixJQUVBLElBQU1pSCxFQUFjLElBQUlqQixFQUFTLENBQzdCQyxTQUFVdkYsRUFDVndGLFFBQVN2RixJQUVic0csRUFBWUMsWUFBWSxDQUFDYixTQUFTLGFBQWNDLFFBQVEsY0FPeEQsSUFBTWEsRUFBWSxJQUFJekMsRUFBYyxrQkFMcEMsU0FBaUNoRyxHQUM3QnVJLEVBQVlDLFlBQVksQ0FBQ2IsU0FBUzNILEVBQUtLLEtBQU11SCxRQUFTNUgsRUFBSzBJLFFBQzNERCxFQUFVOUMsT0FDZCxJQUdBOEMsRUFBVVosb0JBRVY5RixFQUFXUCxpQkFBaUIsU0FBUyxXQUNqQ2lILEVBQVVuSCxNQUNkLElBRUEsSUFBTXFILEVBQWlCLENBQ25CcEcsY0FBZSxlQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIseUJBQ2pCRSxXQUFZLDZCQUlLRyxNQUFNQyxLQUNuQnhDLFNBQVN5QyxpQkFBaUIsV0FHckJHLFNBQVEsU0FBQ2xCLEdBQ1EsSUFBSUYsRUFBY3dHLEVBQWdCdEcsR0FDMUN1RyxrQkFDbEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9jYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NjcmlwdHMvZm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zY3JpcHRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7ZGF0YSwgbW9kYWxDYXJkfSl7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9zcmMgPSBkYXRhLnNyYztcclxuICAgICAgICB0aGlzLl9tb2RhbENhcmQgPSBtb2RhbENhcmQ7XHJcbiAgICB9XHJcbiAgICBfZ2V0VGVtcGxhdGVDYXJkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcignI2VsZW1lbnRzLXRlbXBsYXRlJylcclxuICAgICAgICAuY29udGVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICAgIH1cclxuICAgIF9nZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGVDYXJkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZEltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5jYXJkVGl0bGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19mb290ZXItdGV4dFwiKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLmNhcmRJbWFnZS5zcmMgPSB0aGlzLl9zcmM7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRcclxuICAgIH1cclxuICAgIF9oYW5kbGVDYXJkQ2xpY2soe25hbWUsc3JjfSkge1xyXG4gICAgICAgIHRoaXMubW9kYWxDYXJkLm9wZW4oe25hbWUsc3JjfSlcclxuICAgIH07XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaWNvbi1saWtlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdG4oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmljb24tcmVtb3ZlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtuYW1lOiB0aGlzLl9uYW1lLCBzcmM6IHRoaXMuX3NyY30pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUxpa2VCdG4gKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmljb24tbGlrZVwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiaWNvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2hhbmRsZURlbGV0ZUJ0biAoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxufSIsIi8qRURJVCBQUk9GSUxFKi9cclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJylcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVPY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fb2N1cGF0aW9uJylcclxuXHJcbi8qQUREIFBPUFVQIFBMQUNFICovXHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nLCBmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5nLmlucHV0U2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5nLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5nLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmcuZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faXNWYWxpZCh0aGlzLl9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qTMOzZ2ljYSBkZWwgZm9ybXVsYXJpbyovXHJcbiAgICBfaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICAgICAgPyB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KVxyXG4gICAgICAgIDogdGhpcy5fc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgICAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogTMOzZ2ljYSBkZWwgYm90w7NuICovIFxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZWRCdXR0b24oYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50KTtcclxuICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9kaXNhYmxlZEJ1dHRvbihidXR0b25FbGVtZW50KSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9lbmFibGVCdXR0b24oYnV0dG9uRWxlbWVudCkge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyZXIoKXtcclxuICAgICAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwZW5kSXRlbShlbGVtZW50KXtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRJdGVtKGVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCl7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX19vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCl7XHJcbiAgICAgICAgaWYoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIil7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2Nsb3NlT25DbGljayhldnQpe1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fb3BlbmVkJykgfHxcclxuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19wb3B1cC1pbWctY2xvc2UnKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2hhbmRsZUNsb3NlQnV0dG9uKGV2dCl7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID1ldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX3Byb2ZpbGUtY2xvc2UtaWNvbicpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1pY29uJylcclxuICAgICAgICBpZiAoYnV0dG9uKXRoaXMuY2xvc2UoKVxyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbG9zZU9uQ2xpY2soZXZ0KSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlQnV0dG9uKGV2dClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpe1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX190ZXh0XCIpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdFxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVzZXQoKVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpe1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtSW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcG9wdXAtaW1nLXRpdGxlXCIpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3BvcHVwLWltZy1iYWNrZ3JvdW5kXCIpXHJcbiAgICB9XHJcbiAgICBvcGVuKHtuYW1lLCBzcmN9KXtcclxuICAgICAgICBzdXBlci5vcGVuKClcclxuICAgICAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gc3JjIDtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbmFtZSlcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHt1c2VyTmFtZSwgdXNlckpvYn0pIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lLFxyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IgPSB1c2VySm9iXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1c2VyTmFtZSA6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICB1c2VySm9iIDogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oZGF0YSl7XHJcbiAgICAgICAgY29uc3Qge3VzZXJuYW1lLCB1c2Vyam9ifSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcclxuICAgICAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gdXNlcmpvYjtcclxuICAgIH1cclxufSIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge0NhcmR9IGZyb20gXCIuLi9zY3JpcHRzL2NhcmQuanNcIjtcclxuaW1wb3J0IHtcclxuICAgIHByb2ZpbGVOYW1lLFxyXG4gICAgcHJvZmlsZU9jdXBhdGlvbixcclxuICAgIGJ1dHRvbkVkaXQsXHJcbiAgICBidXR0b25BZGRcclxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9mb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9zY3JpcHRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgICAgIHNyYzogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICAgICAgc3JjOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgICAgIHNyYzogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgICAgICBzcmM6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICAgICAgc3JjOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICAgIHNyYzogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiXHJcbiAgICB9XHJcbl07XHJcblxyXG5cclxuY29uc3QgbW9kYWxDYXJkID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLm1vZGFsX19wb3B1cC1pbWdcIik7XHJcbm1vZGFsQ2FyZC5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGVsZW1lbnRDYXJkID0gbmV3IENhcmQoe2RhdGEsbW9kYWxDYXJkfSlcclxuICAgICAgICByZXR1cm4gZWxlbWVudENhcmQuX2dlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5jb25zdCBlbGVtZW50c0dyaWQgPSBuZXcgU2VjdGlvbih7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXIgOiAoY2FyZEl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtZW50Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZEl0ZW0pXHJcbiAgICAgICAgZWxlbWVudHNHcmlkLmFwcGVuZEl0ZW0oZWxlbWVudENhcmQpO1xyXG4gICAgfSxcclxufSwgJy5lbGVtZW50cycpXHJcbmVsZW1lbnRzR3JpZC5yZW5kZXJlcigpO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCBlbGVtZW50Q2FyZCA9IGNyZWF0ZUNhcmQoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEudGl0bGUsXHJcbiAgICAgICAgc3JjOiBkYXRhLnNyYyxcclxuICAgIH0pO1xyXG4gICAgZWxlbWVudHNHcmlkLnByZXBlbmRJdGVtKGVsZW1lbnRDYXJkKVxyXG4gICAgY3JlYXRlUG9wdXBBZGQuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3QgY3JlYXRlUG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1wbGFjZVwiLCBhZGROZXdDYXJkKTtcclxuY3JlYXRlUG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY3JlYXRlUG9wdXBBZGQub3BlbigpXHJcbn0pXHJcblxyXG5jb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB1c2VyTmFtZTogcHJvZmlsZU5hbWUsXHJcbiAgICB1c2VySm9iOiBwcm9maWxlT2N1cGF0aW9uLFxyXG59KTtcclxudXNlclByb2ZpbGUuc2V0VXNlckluZm8oe3VzZXJuYW1lOlwiTWFyaWNhcm1lblwiLCB1c2Vyam9iOlwiRGV2ZWxvcGVyXCJ9KVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oe3VzZXJuYW1lOmRhdGEubmFtZSwgdXNlcmpvYjogZGF0YS5hYm91dH0pXHJcbiAgICBlZGl0UG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgZWRpdFBvcHVwLm9wZW4oKTtcclxufSlcclxuXHJcbmNvbnN0IHNldHRpbmdFbGVtZW50ID0ge1xyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX3RleHRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25faW5hY3RpdmVcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9fdGV4dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbihmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIilcclxuICAgICk7XHJcblxyXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCB2YWxpZGF0b3JGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ0VsZW1lbnQsIGZvcm1FbGVtZW50KTtcclxuICAgICAgICB2YWxpZGF0b3JGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsIl9yZWYiLCJkYXRhIiwibW9kYWxDYXJkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9zcmMiLCJzcmMiLCJfbW9kYWxDYXJkIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZWxlbWVudCIsIl9nZXRUZW1wbGF0ZUNhcmQiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsIl9yZWYyIiwib3BlbiIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnRuIiwiX2hhbmRsZURlbGV0ZUJ0biIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJidXR0b25FZGl0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlT2N1cGF0aW9uIiwiYnV0dG9uQWRkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b25FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9pc1ZhbGlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJhZGQiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVkQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfY2xvc2VPbkNsaWNrIiwiX2hhbmRsZUNsb3NlQnV0dG9uIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImhhbmRsZUZvcm1TdWJtaXQiLCJjYWxsIiwiX2lucHV0TGlzdCIsIl9idXR0b25TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJyZXNldCIsIl90aGlzMiIsIl9mb3JtSW5wdXRWYWx1ZXMiLCJpbnB1dCIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfdGl0bGUiLCJfaW1hZ2UiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwidXNlcm5hbWUiLCJ1c2Vyam9iIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjcmVhdGVDYXJkIiwiX2dlbmVyYXRlQ2FyZCIsImVsZW1lbnRzR3JpZCIsImNhcmRJdGVtIiwiZWxlbWVudENhcmQiLCJhcHBlbmRJdGVtIiwiY3JlYXRlUG9wdXBBZGQiLCJ0aXRsZSIsInByZXBlbmRJdGVtIiwidXNlclByb2ZpbGUiLCJzZXRVc2VySW5mbyIsImVkaXRQb3B1cCIsImFib3V0Iiwic2V0dGluZ0VsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==